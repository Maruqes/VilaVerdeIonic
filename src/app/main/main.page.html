<!-- main.page.html (rev) -->

<ion-content class="main-page ion-padding">
  <img src="assets/vila_verde.gif" alt="Vila Verde Logo"
    style="display: block; margin: 0.5rem auto 0 auto; width: 65px;" />

  <!-- Cartão de Meteorologia -->
  <ion-card class="weather-card glass-card" *ngIf="weatherData">
    <ion-card-header>
      <ion-card-title>Meteorologia em Vila Verde</ion-card-title>
    </ion-card-header>
    <ion-card-content class="weather-content">
      <div class="weather-info">
        <img [src]="weatherIconUrl" alt="Weather icon" class="weather-icon" *ngIf="weatherIconUrl" />
        <div class="weather-details">
          <span class="temperature">{{ weatherData.main.temp | number:'1.0-0' }}°C</span>
          <span class="description">{{ weatherData.weather[0].description | titlecase }}</span>
        </div>
      </div>
      <div class="extra-info">
        <span>Sensação: {{ weatherData.main.feels_like | number:'1.0-0' }}°C</span>
        <span>Humidade: {{ weatherData.main.humidity }}%</span>
        <span *ngIf="weatherData.rain && weatherData.rain['1h']">Chuva (1h): {{ weatherData.rain['1h'] }} mm</span>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-label class="popular-title">Populares em Vila Verde</ion-label>

  <!-- Carrossel horizontal de locais populares -->
  <div class="popular-scroll">
    <!-- Use *ngFor with async pipe to loop through popular items -->
    <!-- Add click event to navigate -->
    <ion-card class="popular-card" *ngFor="let item of popularItems$ | async" (click)="goToItemDetail(item.id)">
      <img [src]="item.image" [alt]="item.name" />
      <ion-card-header>
        <ion-card-title>{{ item.name }}</ion-card-title>
        <p>{{ item.description }}</p>
      </ion-card-header>
    </ion-card>
  </div>

</ion-content>

<!-- Use the shared footer component -->
<app-footer-tabs></app-footer-tabs>